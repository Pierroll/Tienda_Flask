{% extends 'base.html' %}

{% block title %}Lista de Productos{% endblock %}

{% block body %}
<div class="container">
    <h2>Lista de Productos en Base de Datos</h2>
    
    {% if items %}
    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>Imagen</th>
                <th>Nombre</th>
                <th>Precio Actual</th>
                <th>Precio Anterior</th>
                <th>Stock</th>
                <th>Oferta Flash</th>
                <th>Fecha Agregado</th>
            </tr>
        </thead>
        <tbody>
            {% for item in items %}
            <tr>
                <td>{{ item.id }}</td>
                <td>
                    <div style="max-width: 100px; max-height: 100px; overflow: hidden; display: flex; justify-content: center; align-items: center;">
                        <img src="{{ item.product_picture }}" alt="{{ item.product_name }}" style="max-width: 100%; max-height: 100%; object-fit: cover;">
                    </div>
                </td>
                <td>{{ item.product_name }}</td>
                <td>${{ item.current_price }}</td>
                <td>${{ item.previous_price }}</td>
                <td>
                    {% if item.in_stock > 10 %}
                        Alta
                    {% elif item.in_stock > 0 %}
                        Media
                    {% else %}
                        Baja
                    {% endif %}
                </td>
                <td>
                    {% if item.flash_sale %}
                        SÃ­
                    {% else %}
                        No
                    {% endif %}
                </td>
                <td>{{ item.date_added.strftime('%Y-%m-%d %H:%M') }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <div>
        No hay productos en la base de datos.
    </div>
    {% endif %}
</div>
{% endblock %}
